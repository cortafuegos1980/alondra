<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reserva Entradas - La Jirafa</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #f0f0f0; }
  .container { max-width: 400px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
  .timer { background: #ffebee; color: #d32f2f; padding: 10px; border-radius: 5px; text-align: center; font-weight: bold; margin-bottom: 15px; }
  .form-group { margin-bottom: 15px; }
  label { display: block; margin-bottom: 5px; font-weight: bold; }
  input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
  button { width: 100%; padding: 15px; background: #25D366; color: white; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; }
  button.loading { background: #cccccc; cursor: not-allowed; }
  .message { padding: 10px; border-radius: 5px; margin-bottom: 15px; display: none; }
</style>
</head>
<body>
<div class="container">
  <h2>Reserva Entradas - La Jirafa</h2>
  
  <div class="timer" id="timerDiv">Tiempo restante: 5:00</div>
  <div id="message" class="message"></div>
  
  <div class="form-group">
    <label>Apellido y Nombre:</label>
    <input type="text" id="nombre" placeholder="Ej: Maria Gonzalez">
  </div>

  <div class="form-group">
    <label>Tu WhatsApp (solo numeros):</label>
    <input type="text" id="telefono" placeholder="Ej: 3415123456">
  </div>

  <div class="form-group">
    <label>Cantidad de Entradas (max. 10):</label>
    <input type="number" id="cantidad" min="1" max="10" value="1">
  </div>

  <div class="form-group">
    <label>Fecha del Evento:</label>
    <select id="fecha">
      <option value="Viernes 20:30">Viernes 20:30</option>
      <option value="Sabado 21:00">Sabado 21:00</option>
      <option value="Domingo 19:00">Domingo 19:00</option>
    </select>
  </div>

  <button id="btnReservar">Enviar Reserva por WhatsApp</button>
</div>

<script>
let tiempoRestante = 300; // 5 minutos
let temporizadorActivo = true;

function actualizarTemporizador() {
  if (!temporizadorActivo) return;
  const minutos = Math.floor(tiempoRestante / 60);
  const segundos = tiempoRestante % 60;
  const timerDiv = document.getElementById('timerDiv');
  timerDiv.textContent = `Tiempo restante: ${minutos}:${segundos < 10 ? '0' : ''}${segundos}`;

  if (tiempoRestante <= 60) {
    timerDiv.style.background = '#ffcdd2';
    timerDiv.style.color = '#b71c1c';
  }

  if (tiempoRestante <= 0) {
    timerDiv.textContent = 'TIEMPO AGOTADO';
    document.getElementById('btnReservar').disabled = true;
    document.getElementById('btnReservar').classList.add('loading');
    temporizadorActivo = false;
  } else {
    tiempoRestante--;
    setTimeout(actualizarTemporizador, 1000);
  }
}

function mostrarMensaje(texto, tipo) {
  const msg = document.getElementById('message');
  msg.textContent = texto;
  msg.style.display = 'block';
  if (tipo === 'error') {
    msg.style.background = '#ffebee';
    msg.style.color = '#c62828';
  } else {
    msg.style.background = '#e8f5e8';
    msg.style.color = '#2e7d32';
  }
}

document.getElementById('btnReservar').onclick = function() {
  const nombre = document.getElementById('nombre').value.trim();
  const telefono = document.getElementById('telefono').value.trim().replace(/\D/g,'');
  const cantidad = document.getElementById('cantidad').value;
  const fecha = document.getElementById('fecha').value;

  if (!nombre || !telefono || cantidad < 1 || cantidad > 10) {
    mostrarMensaje('Por favor completa todos los campos correctamente', 'error');
    return;
  }

  // Mensaje para WhatsApp
  const mensaje = `Reserva La Jirafa\nNombre: ${nombre}\nWhatsApp: ${telefono}\nEntradas: ${cantidad}\nFecha: ${fecha}`;
  const linkWhatsApp = `https://wa.me/549${telefono}?text=${encodeURIComponent(mensaje)}`;

  // Abrir WhatsApp Web o app móvil
  window.open(linkWhatsApp, '_blank');

  mostrarMensaje('✅ Mensaje listo para enviar por WhatsApp', 'success');
  temporizadorActivo = false;
};

actualizarTemporizador();
</script>
</body>
</html>
